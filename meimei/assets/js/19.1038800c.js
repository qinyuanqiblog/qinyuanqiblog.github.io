(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{415:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"起源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#起源"}},[t._v("#")]),t._v(" 起源")]),t._v(" "),s("ul",[s("li",[t._v("最近突然想尝试剪视频，所以就想先从动漫开始，二次元搞起来，剪视频就必须需要原视频，怎么找到这些资源呢，知乎一搜一大把")]),t._v(" "),s("li",[t._v("我经常会上六DM 里面去看动漫,里面的动漫清晰度也还可以，所以就想怎么写个爬虫直接把喜欢的动漫下载下来，毕竟是干前端的，手动下载有点丢人把 😄😄😄")])]),t._v(" "),s("h2",{attrs:{id:"最终效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最终效果"}},[t._v("#")]),t._v(" 最终效果")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/3b4a9907-f3a4-4ed8-aa95-a90219b72eeb-2331693.jpg",alt:"效果图"}}),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/5d0810bc-b69d-4514-9c51-066640023495-2331693.jpg",alt:"效果图"}}),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/7b5a7786-6473-4bad-8094-1a9a53bb969f-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("h2",{attrs:{id:"下载后的文件名不是-mp4-怎么解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载后的文件名不是-mp4-怎么解决"}},[t._v("#")]),t._v(" 下载后的文件名不是.mp4 怎么解决")]),t._v(" "),s("blockquote",[s("p",[t._v("比如说我下载的这个龙猫就是啥yum格式的，我直接后缀名改成.mp4 搞定，如果还不行，就上个格式工厂 应该就好了\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/9cdcbf9e-6055-4dfb-b13a-0e552e56e09c-2331693.jpg",alt:"效果图"}}),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/cd08e69e-acf7-4156-82d7-bfa2ff72d65a-2331693.jpg",alt:"效果图"}}),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/27cecfe6-ab41-43f6-917b-137b5f6af53a-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h2",{attrs:{id:"作者在写这篇文章的技能和环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作者在写这篇文章的技能和环境"}},[t._v("#")]),t._v(" 作者在写这篇文章的技能和环境")]),t._v(" "),s("ul",[s("li",[t._v("前端略懂一二")]),t._v(" "),s("li",[t._v("nodejs 一窍不通")]),t._v(" "),s("li",[t._v("window系统")]),t._v(" "),s("li",[t._v("puppeteer 版本: 14.3.0")]),t._v(" "),s("li",[t._v("node版本: 16.1.0")])]),t._v(" "),s("h2",{attrs:{id:"开始分析网站-随便搜一个喜欢的动漫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始分析网站-随便搜一个喜欢的动漫"}},[t._v("#")]),t._v(" 开始分析网站, 随便搜一个喜欢的动漫")]),t._v(" "),s("p",[t._v("介绍页\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/75698900-05d5-4cc2-9c5c-fc7796f28801-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("h3",{attrs:{id:"随便点击一个播放地址-f12-搞起来-分析页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#随便点击一个播放地址-f12-搞起来-分析页面"}},[t._v("#")]),t._v(" 随便点击一个播放地址，F12 搞起来，分析页面")]),t._v(" "),s("blockquote",[s("p",[t._v("可以，这个网站还是会玩的，调试工具开起来就给我一直debugger\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/82f50915-7276-4acc-9c81-a4e8d6e88f8a-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h3",{attrs:{id:"如何跳过debugger死循环"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何跳过debugger死循环"}},[t._v("#")]),t._v(" 如何跳过debugger死循环")]),t._v(" "),s("blockquote",[s("p",[t._v("这种方式可以方便跳过死循环，并且我们还可以继续调试\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/bf15eacc-657c-4763-9490-e8be57bff3c8-2331693.jpg",alt:"效果图"}}),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/68087dbc-cc12-4c59-a4c9-3fd36d299580-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h3",{attrs:{id:"找到页面播放地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#找到页面播放地址"}},[t._v("#")]),t._v(" 找到页面播放地址")]),t._v(" "),s("blockquote",[s("p",[t._v("这个网站还是很简单的， 直接把资源地址丢到iframe里面而已，难度降低了，怪不得不给别人调试，😄😄\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/95da9abc-068f-4f47-80b5-1d65842d3319-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h3",{attrs:{id:"分析播放地址由来"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析播放地址由来"}},[t._v("#")]),t._v(" 分析播放地址由来")]),t._v(" "),s("h4",{attrs:{id:"思路1-通过接口请求分析-是否存在共通点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路1-通过接口请求分析-是否存在共通点"}},[t._v("#")]),t._v(" 思路1：通过接口请求分析，是否存在共通点")]),t._v(" "),s("blockquote",[s("p",[t._v("经过抓包，发现第一集和第二集的播放资源路径没有共同性可言，放弃o(╥﹏╥)o\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/dade251d-faa0-4b3d-8a25-e27c6de6e5bd-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h4",{attrs:{id:"思路2-直接看播放器的源码逻辑-找到url的拼接逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路2-直接看播放器的源码逻辑-找到url的拼接逻辑"}},[t._v("#")]),t._v(" 思路2：直接看播放器的源码逻辑，找到url的拼接逻辑")]),t._v(" "),s("h5",{attrs:{id:"找出播放器源码-直接通过调试工具找到所有的js文件-然后随便看看"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#找出播放器源码-直接通过调试工具找到所有的js文件-然后随便看看"}},[t._v("#")]),t._v(" 找出播放器源码，直接通过调试工具找到所有的js文件，然后随便看看")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/2d2d1e37-51d8-4327-be1b-ecd103557031-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("h5",{attrs:{id:"分析播放器源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析播放器源码"}},[t._v("#")]),t._v(" 分析播放器源码")]),t._v(" "),s("blockquote",[s("p",[t._v("读取播放器源码发现，这个网站会在页面里面存入一个全局变量\n"),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/00e35f62-3938-4747-9ae7-4461e531dff1-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"全局变量-player-aaaa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局变量-player-aaaa"}},[t._v("#")]),t._v(" 全局变量 player_aaaa")]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/dbea705d-4fdf-463d-b709-3a9ecb704ebe-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/447e3d5f-3753-45cb-b0d6-b30a5148cdb2-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"会做赋值存储-然后会引入一个js文件-文件名-static-player-parse-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#会做赋值存储-然后会引入一个js文件-文件名-static-player-parse-js"}},[t._v("#")]),t._v(" 会做赋值存储，然后会引入一个js文件，文件名：/static/player/parse.js")]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/d2494800-baa2-4cbb-bf85-e57a392ca1b9-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"打开调试工具-找到-static-player-parse-js文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打开调试工具-找到-static-player-parse-js文件"}},[t._v("#")]),t._v(" 打开调试工具，找到/static/player/parse.js文件，")]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/8eb212ba-3173-4aff-8dbc-56ba59cda52b-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"static-player-parse-js-文件内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#static-player-parse-js-文件内容"}},[t._v("#")]),t._v(" /static/player/parse.js 文件内容")]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/1855940c-18ba-4561-a46f-3f1e327d0b3f-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"浏览器控制台输入-macplayer-parse-macplayer-playurl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器控制台输入-macplayer-parse-macplayer-playurl"}},[t._v("#")]),t._v(" 浏览器控制台输入：MacPlayer.Parse + MacPlayer.PlayUrl")]),t._v(" "),s("blockquote",[s("p",[t._v("因为播放器的源码是一个自执行函数，然后我们又看到这个parse.js 文件里面的资源拼接方式，所以我们可以在浏览器的控制台里面直接把这个资源给拼出来")])]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/f336c5a8-2fee-4949-ab23-251a2c3a18b1-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"右键保存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#右键保存"}},[t._v("#")]),t._v(" 右键保存？")]),t._v(" "),s("blockquote",[s("p",[t._v("把上面的地址放到浏览器里面访问，发现就是我们想下载的资源了， 到了这一步骤，我们就可以右键保存了，当然作为一名合格的前端，我们怎么可能会去右键保存呢，接下来我们就准备上大杀器，puppeteer 配合nodejs 来帮我们实现自动下载\n"),s("a",{attrs:{href:"https://danmu.yhdmjx.com/m3u8.php?url=5BHZgz8M0ps5P4wbTU%2BuhFqXvQJZHkbJo0Vzo1uDgNuU1buMWjaWCGbxQKzTM9ln",target:"_blank",rel:"noopener noreferrer"}},[t._v("资源demo"),s("OutboundLink")],1)])]),t._v(" "),s("ul",[s("li",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/34b6e042-2818-46bb-9af3-706fdfc3d230-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h5",{attrs:{id:"如何做自动化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何做自动化"}},[t._v("#")]),t._v(" 如何做自动化？")]),t._v(" "),s("ul",[s("li",[t._v("通过上面的连接，会进入到一个解析页面，因为我们要做成自动下载的，必须要找到视频源连接，否则不行，o(╥﹏╥)o")]),t._v(" "),s("li",[t._v("查找元素页面，发现了最终的资源地址")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://v6-default.ixigua.com/3402f71ea71a90facc0aae3dd0f759c3/62a1ee34/video/tos/cn/tos-cn-v-c9e10a/dc23fecd7c8b43a58a45da68b9e19b8c/",target:"_blank",rel:"noopener noreferrer"}},[t._v("最终的资源地址"),s("OutboundLink")],1),t._v(" "),s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/f2eb1368-86f0-4946-bb6e-81644d61b357-2331693.jpg",alt:"效果图"}})])]),t._v(" "),s("h2",{attrs:{id:"使用puppeteer解析页面-获取到视频资源地址-然后使用nodejs自动下载视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用puppeteer解析页面-获取到视频资源地址-然后使用nodejs自动下载视频"}},[t._v("#")]),t._v(" 使用puppeteer解析页面，获取到视频资源地址，然后使用nodejs自动下载视频")]),t._v(" "),s("h3",{attrs:{id:"思路1-遍历出播放列表-然后开始一个任务-依次打开页面-找到资源地址-然后收集到所有的播放资源地址-使用nodejs下载到本地"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路1-遍历出播放列表-然后开始一个任务-依次打开页面-找到资源地址-然后收集到所有的播放资源地址-使用nodejs下载到本地"}},[t._v("#")]),t._v(" 思路1：遍历出播放列表，然后开始一个任务，依次打开页面，找到资源地址，然后收集到所有的播放资源地址，使用nodejs下载到本地，")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/6d222778-7825-4302-8d17-c1178d27fa49-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("h4",{attrs:{id:"为啥不用上面那个思路-因为那个思路我把代码写完-测试了一下-发现他的服务器扛不住哈-所以还是保险点-一次一个操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为啥不用上面那个思路-因为那个思路我把代码写完-测试了一下-发现他的服务器扛不住哈-所以还是保险点-一次一个操作"}},[t._v("#")]),t._v(" 为啥不用上面那个思路，因为那个思路我把代码写完，测试了一下，发现他的服务器扛不住哈，所以还是保险点，一次一个操作")]),t._v(" "),s("h3",{attrs:{id:"思路2-使用puppetee-自动触发右键下载-并保存到我们想要下载的地方-目前没有尝试这个方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路2-使用puppetee-自动触发右键下载-并保存到我们想要下载的地方-目前没有尝试这个方法"}},[t._v("#")]),t._v(" 思路2：使用puppetee 自动触发右键下载，并保存到我们想要下载的地方（目前没有尝试这个方法）")]),t._v(" "),s("h3",{attrs:{id:"思路3-遍历出播放列表-然后开始一个任务-从第一个开始-打开页面-找到资源地址-使用nodejs下载到本地-下载完成-开始下一个就这样"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路3-遍历出播放列表-然后开始一个任务-从第一个开始-打开页面-找到资源地址-使用nodejs下载到本地-下载完成-开始下一个就这样"}},[t._v("#")]),t._v(" 思路3：遍历出播放列表，然后开始一个任务，从第一个开始，打开页面，找到资源地址，使用nodejs下载到本地，下载完成，开始下一个就这样")]),t._v(" "),s("h4",{attrs:{id:"思路3-难点分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思路3-难点分析"}},[t._v("#")]),t._v(" 思路3 难点分析")]),t._v(" "),s("h5",{attrs:{id:"pupeteer-如何获取元素的属性-别问我-反正我不懂-堆栈溢出大佬告诉我的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pupeteer-如何获取元素的属性-别问我-反正我不懂-堆栈溢出大佬告诉我的"}},[t._v("#")]),t._v(" pupeteer 如何获取元素的属性，别问我，反正我不懂， 堆栈溢出大佬告诉我的")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/56467696/get-the-value-of-html-attributes-using-puppeteer",target:"_blank",rel:"noopener noreferrer"}},[t._v("堆栈溢出的答案"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://api2.mubu.com/v3/document_image/ce86325c-69f3-4b1a-9aaa-83a85236c3e7-2331693.jpg",alt:"效果图"}})]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取单个")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("evaluate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'document.querySelector("span.styleNumber").getAttribute("data-Color")\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取多个")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" attr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$$eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"span.styleNumber"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data-Color"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h5",{attrs:{id:"nodejs下载远端视频-并显示进度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodejs下载远端视频-并显示进度"}},[t._v("#")]),t._v(" nodejs下载远端视频，并显示进度")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" https "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我的demo使用的是axios 来下载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" axiosRequest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils/request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这是一个axios实例")]),t._v("\naxiosRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://media.w3.org/2010/05/sintel/trailer.mp4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("responseType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回头里面的content-length字段，会告诉我们这个视频有多大")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  获取视频总长度 byte为单位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" totalLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-length'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前数据的总长度")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" totalChunkLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前读取的流")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readSteam "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取流会触发的事件")]),t._v("\nreadSteam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ntotalChunkLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据传输中，当前进度==>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("totalChunkLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" totalLength"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取完成的时间")]),t._v("\nreadSteam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'获取远端数据完毕'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取错误会触发的事件")]),t._v("\nreadSteam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'获取远端数据完毕，发生了错误,错误信息==>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入本地的文件名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("67")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mp4\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用nodejs写入文件方法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writeFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readSteam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入完成事件")]),t._v("\nwriteFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finish"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nwriteFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"恭喜大哥，本地数据写入完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入错误触发的事件")]),t._v("\nwriteFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不好意思，写入本地文件发生异常，错误信息==>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br")])]),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//axios 代码如下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建axios实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" service "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("baseURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// api 的 base_url")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 永不凋谢，真男人 就是这么持久 😄😄")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90000000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求超时时间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// request拦截器")]),t._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do something with request error")]),t._v("\n   console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for debug")]),t._v("\n   Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 响应拦截器")]),t._v("\nservice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interceptors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   \n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" service\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br")])]),s("h2",{attrs:{id:"完整代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整代码"}},[t._v("#")]),t._v(" 完整代码")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/qinyuanqiblog/puppeteer-reptile",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整代码"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"免责声明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#免责声明"}},[t._v("#")]),t._v(" 免责声明")]),t._v(" "),s("ul",[s("li",[t._v("首先 非常感谢这个网站让我这个老二次元能够找到喜欢的片源 😄😄😄")]),t._v(" "),s("li",[t._v("本项目只是学习使用，无意对此网站进行爬虫等操作")]),t._v(" "),s("li",[t._v("希望想用的同学自己玩玩就行，树大招风")]),t._v(" "),s("li",[t._v("侵权请联系，立马删除")]),t._v(" "),s("li",[t._v("就这些吧")])]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.52pojie.cn/thread-1618559-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("破解视频的另一个思路"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://stackoverflow.com/questions/56467696/get-the-value-of-html-attributes-using-puppeteer",target:"_blank",rel:"noopener noreferrer"}},[t._v("puppeterr 获取元素属性"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://www.scrapingbee.com/blog/download-file-puppeteer/",target:"_blank",rel:"noopener noreferrer"}},[t._v("puppeterr 下载文件"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);