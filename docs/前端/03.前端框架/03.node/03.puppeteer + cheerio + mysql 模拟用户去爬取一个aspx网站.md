---
title: puppeteer + cheerio + mysql æ¨¡æ‹Ÿç”¨æˆ·å»çˆ¬å–ä¸€ä¸ªaspxç½‘ç«™
date: 2023-04-25 17:07:02
permalink: /pages/d5e89d/
categories:
  - web
  - frame
  - node
tags:
  - 
---




## èµ·æº

> æœ€è¿‘è¢«å‰åŒäº‹é—®æ˜¯å¦å¯ä»¥å¸®ä»–å»çˆ¬å–ä¸€ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œç„¶åä»–æŠŠç½‘ç«™å‘ç»™æˆ‘äº†ï¼Œä¹‹åæˆ‘å°±å»ç ”ç©¶äº†ä¸‹ï¼Œ
>> æœ¬æ¥è®¡åˆ’ç”¨spider-flow è¿™ä¸ªä¸œè¥¿æ¥çˆ¬çš„ï¼Œæ¯•ç«Ÿèƒ½ä¸å†™ä»£ç çš„ï¼Œä¸ºå•¥æˆ‘è¦å»å†™ä»£ç ï¼Œç„¶åç ”ç©¶äº†ä¸‹spider-flow å‘ç°æ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œæµªè´¹äº†ä¸¤å¤©æ—¶é—´ï¼Œ
>ğŸ˜„ğŸ˜„ğŸ˜„ï¼Œ è¿˜æ˜¯è€è€å®å®æ‰‹å†™æŠŠ,å¯¹spider-flow æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹æˆ‘å†™çš„ï¼š<https://www.mubucm.com/doc/7rBgfYhSzrt>

## æœ€ç»ˆæ•ˆæœ

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/f6962e12-283b-47e8-831d-b29ea553c618-2331693.jpg)

## ä½œè€…åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æŠ€èƒ½å’Œç¯å¢ƒ

- å‰ç«¯ç•¥æ‡‚ä¸€äºŒ
- nodejs ä¸€çªä¸é€š
- æ•°æ®åº“ä¸€çªä¸é€š
- windowç³»ç»Ÿ
- puppeteer ç‰ˆæœ¬: 19.7.4
- nodeç‰ˆæœ¬: 14.18.0

## æœ¬æ–‡åªé€‚åˆå°ç™½é˜…è¯»ï¼Œå¤§ä½¬è¯·å‡ºé—¨å·¦è½¬~

## é¡µé¢åœ°å€

- <http://zjj.sz.gov.cn:8004/?__EVENTARGUMENT=3&ddlPageCount=20>

- æœ¬æ–‡å°†ä»¥çˆ¬å–ä¸€æ‰‹æˆ¿é¢„å”®æˆ¿æºæ•°æ®ä¸ºä¾‹

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/bbdf06e6-82f1-4871-b0be-7e877ccfb9a4-2331693.jpg)

#### é¡µé¢åˆ†æ

- ä¸€æ‰‹æˆ¿é¢„å”®ä¿¡æ¯é¡µé¢ä¿¡æ¯é¦–é¡µæ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/01ffb709-61b4-4c8b-98f2-6bc63bb14aff-2331693.jpg)

- é¡µé¢æ‰§è¡Œé€»è¾‘

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/542ef7e7-6159-4656-85bd-12a424356da1-2331693.jpg)

- é¡µé¢æ¸²æŸ“é€»è¾‘

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/cfaf2b29-3923-4837-a172-834243594c16-2331693.jpg)

- é¡¹ç›®è¯¦æƒ…é¡µè·³è½¬é€»è¾‘ï¼š<http://zjj.sz.gov.cn/ris/bol/szfdc/projectdetail.aspx?id=126809>

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/f6439137-d019-40c9-97bc-f0c138b76342-2331693.jpg)

- è¯ä»¶è¯¦æƒ…é¡µè·³è½¬é€»è¾‘ï¼š<http://zjj.sz.gov.cn/ris/bol/szfdc/certdetail.aspx?id=126809>

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/c52c1cb6-7367-4165-b07e-1283886b8654-2331693.jpg)

## æ€è·¯

- æ€è·¯1ï¼šæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼Œåƒä¸€ä¸ªæ­£å¸¸çš„ç”¨æˆ·å»ç‚¹å‡»ç„¶åçˆ¬å–æ•°æ®ï¼Œä¹‹åå†æŠŠæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“, ç„¶åç‚¹å‡»åˆ†é¡µé‡å¤è¿™ä¸ªæ“ä½œï¼Œç›´åˆ°çˆ¬å–å®Œæ‰€æœ‰æ•°æ®
- æ€è·¯2ï¼šç›´æ¥è°ƒç”¨è·å–æ•°æ®æ¥å£ï¼Œç„¶åè§£ææ•°æ®ï¼Œä¹‹åå†æŠŠæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“æˆ‘ä»¬å…ˆç”¨æ€è·¯1çš„æ–¹å¼æ¥åšï¼Œ
- æœ¬æ¥æˆ‘æƒ³ç”¨æ€è·¯2çš„åšæ³•æ¥åšï¼Œåæ¥æœ‰ä¸ªé—®é¢˜æ²¡è§£å†³ï¼Œæ‰€ä»¥å…ˆæŒ‰ç…§æ€è·¯1æ¥å®ç°

## æ ¸å¿ƒä»£ç è®²è§£

### puppetter å¦‚ä½•æ”¹å˜é¡µé¢çš„å€¼ï¼Ÿ

#### å®˜ç½‘api

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/ddbb398e-c613-4e6a-9413-dec4ce39dac0-2331693.jpg)

- å…·ä½“ä»£ç ï¼ŒæŒ‰ç…§20æ¡/é¡µå»çˆ¬å–
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/2340c4e1-0e93-4cf9-9b3d-4d45cb903abe-2331693.jpg)

### puppetter å¦‚ä½•è§¦å‘äº‹ä»¶ï¼Ÿ

- api

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/b2b084a7-28c6-4214-a2a9-84428d6b00f3-2331693.jpg)

- å®ä¾‹ï¼š
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/401d3c3a-a683-4937-8d5f-eb41b5755893-2331693.jpg)

```js
page.click(#AspNetPager1 > span:nth-last-of-type(1), {delay: 100})
```

### ä½¿ç”¨puppetterè®¿é—®é¡µé¢ï¼Œå¦‚ä½•å»è§£ææ•°æ®ï¼Ÿ

- ä¸€å¼€å§‹æˆ‘è¿˜ä¸€ç›´è¢«å›°åœ¨è¿™ä¸ªpuppetter apiï¼Œä¸€ç›´æƒ³åœ¨è¿™ä¸ªæµè§ˆå™¨æ‰§è¡Œçš„æ—¶å€™å»è·å–è¿™äº›ä¿¡æ¯ï¼Œå…¶å®è¿™ç§ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸æ–¹ä¾¿ï¼Œåæ¥ç™¾åº¦å‘ç°å¯ä»¥ä½¿ç”¨cheerioè¿™ä¸ªåº“ï¼Œåƒä½¿ç”¨jqueryæŠŠå¯¹é¡µé¢åšæ“ä½œ
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e1184de6-31d5-4ef3-a529-5b2e4076a067-2331693.jpg)
- cheerio éå†é¡µé¢æ•°æ®
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/f6aa4fc0-b998-42b4-b923-56134a452ec6-2331693.jpg)
- cheerio å…·ä½“ä»£ç 
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/9fa4a12d-2b1a-4bba-beb9-68b3a4071112-2331693.jpg)

### å¦‚ä½•æŠŠä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ï¼Ÿæ–°å»ºä¸€ä¸ªhouse_info æ•°æ®åº“ï¼Œç„¶åæäº†ä¸€ä¸ªpresell é¢„å”®è¡¨ï¼Œé¢„å”®çš„è¡¨ç»“æ„

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e2f094d3-f9e4-4b3b-a829-6ef2f643da6d-2331693.jpg)

#### sqlç›¸å…³çŸ¥è¯†æŸ¥è¯¢æ•°æ®

- select * from presell
- æ›´æ–°æŸä¸€æ¡æ•°æ®ï¼šupdate presell set name='é˜¿æ–¯é¡¿æ’’',enterprise=99 WHERE serial=2
- æ›´æ–°æ‰€æœ‰çš„æ•°æ®ï¼šUPDATE presell SET address='æ·±åœ³'æ’å…¥æ•°æ®ï¼šINSERT INTO presell (mainKey,serial,id) VALUES (1111,2,3);
- æ‰¹é‡æ’å…¥æ•°æ®ï¼šINSERT INTO presell ( mainKey, serial, id, NAME, enterprise, address, date ) VALUES ( '10001', '2', '3', '4', '5', '6', '2022-02-06' ),( '10002', '2222', '3', '4', '5', '6', '2022-02-06' )

#### å¦‚ä½•æ‰¹é‡æ’å…¥æ•°æ®

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/631d4a99-96c2-4484-9db7-b24c850b00e5-2331693.jpg)

```js
var mysql      = require('mysql2');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : 'root'
});

connection.query('use house_info')

const array = [
  [ 
    1679389969116,
    '13',
    'æ·±æˆ¿è®¸å­—ï¼ˆ2023ï¼‰å—å±±003å·',
    'http://zjj.sz.gov.cn/ris/bol/szfdc/certdetail.aspx?id=126737',
    'æ–¹ç›´ç‘æ¨¾å±±èŠ±å›­',
    'http://zjj.sz.gov.cn/ris/bol/szfdc/ojectdetail.aspx?id=126737',
    'æ·±åœ³å¸‚é¾™å»·æˆ¿åœ°äº§å¼€å‘æœ‰é™å…¬å¸',
    'å—å±±',
    '2023-03-02'
  ],
  [
    1679389969118,
    '13',
    'æ·±æˆ¿è®¸å­—ï¼ˆ2023ï¼‰å—å±±003å·',
    'http://zjj.sz.gov.cn/ris/bol/szfdc/certdetail.aspx?id=126737',
    'æ–¹ç›´ç‘æ¨¾å±±èŠ±å›­',
    'http://zjj.sz.gov.cn/ris/bol/szfdc/ojectdetail.aspx?id=126737',
    'æ·±åœ³å¸‚é¾™å»·æˆ¿åœ°äº§å¼€å‘æœ‰é™å…¬å¸',
    'å—å±±',
    '2023-03-02'
  ],
]
connection.query(`INSERT INTO presell ( mainKey, serial, idCard, idCardUrl, productName, productUrl, enterprise, location, authorizeDate )
VALUES ?`,[array], function (error, results, fields) {
  if (error) {
   log.error('æ‰¹é‡æ’å…¥å¤±æ•—ï¼Œé”™è¯¯ä¿¡æ¯==>', error)
   throw error;
  }
  // connected!
  log.info('æ‰¹é‡æ’å…¥æˆåŠŸ', results)
});
```

## å¼€å§‹ç¼–ç 

- puppetter ç¯å¢ƒæäº†æˆ‘ä¸¤å¤©ï¼Œè£…äº†æ–°ç‰ˆæœ¬ï¼Œchromä¸€ç›´æ²¡æœ‰ä¸‹è½½ä¸‹æ¥ï¼ŒğŸ˜­ğŸ˜­ğŸ˜­ï¼Œè§£å†³æ–¹æ³•çœ‹åé¢

### å…ˆè®¿é—®ä¸€æ¬¡

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e468bafe-d7db-4309-be1e-b3ef68a9ca4b-2331693.jpg)

### å› ä¸ºç¬¬ä¸€ç»„åˆ†é¡µçš„é¡µé¢ç»“æ„å’Œç¬¬äºŒç»„çš„é¡µé¢ç»“æ„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¦ææˆä¸åŒçš„é€»è¾‘ä¸åŒçš„é¡µé¢ç»“æ„ï¼Œéš¾æå“¦

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/dc9d0b4d-1daf-4f63-9447-5f9f1848e9fe-2331693.jpg)

#### ç¬¬ä¸€é¡µçš„æ—¶å€™çš„é¡µé¢ç»“æ„å’Œé€»è¾‘

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e2ad4547-a00d-45b7-83d2-8a0b7182be59-2331693.jpg)

#### ç¬¬äºŒç»„åˆ†é¡µçš„é¡µé¢æœºæ„å’Œé€»è¾‘

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/accd5ddf-7bfb-4aaf-9107-2b0fb8c4c620-2331693.jpg)

#### å¼€å§‹ç¬¬ä¸€è½®çš„è½®è¯¢

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e5d7b523-79da-494f-9653-f9be074cfdb0-2331693.jpg)

#### å¼€å§‹ç¬¬äºŒè½®çš„è½®è¯¢

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/fad8c2c8-6a26-4c7a-ac8d-d604851edccd-2331693.jpg)

### å­˜å‚¨æ•°æ®åº“çš„é€»è¾‘

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/1e9ce03d-450a-4560-866b-b802b7a6a30b-2331693.jpg)

## ä¸‹è½½ä¸äº†chromiumçš„è§£å†³åŠæ³•

### Failed to set up Chromium r1095492! Set "PUPPETEER_SKIP_DOWNLOAD" env variable to skip download

#### é—®é¢˜æˆªå›¾ å…³é”®è¯ï¼šFailed to set up Chromium r1095492! Set "PUPPETEER_SKIP_DOWNLOAD" env variable to skip download

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/112081f4-f16e-4065-a4f4-e811afe76a29-2331693.jpg)

#### é—®é¢˜åŸå› ï¼š ä¸‹é¢è¿™å¼ å›¾æ˜¯æˆ‘åœ¨å®¶é‡Œé¢ç›´æ¥æ›´æ–°å°±å¥½äº†ï¼Œä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ï¼Œåœ¨å…¬å¸ç”µè„‘å·²æ›´æ–°å°±ç‹—å¸¦ï¼Œå¤ªéš¾äº†

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/32e96af9-04e3-41fe-8c60-26d151f64a00-2331693.jpg)

#### è§£å†³åŠæ³•ï¼šï¼ˆæƒ³ç›´æ¥çœ‹ç­”æ¡ˆçš„ï¼Œç›´æ¥è·³åˆ°ç»ˆæåŸå›  æˆ–è€…æ–¹æ³•5å¤„æŸ¥çœ‹è§£å†³åŠæ³•ï¼‰

##### ~~æ–¹æ³•1ï¼š ä»puppeteer æºç æ‰¾åˆ°ä¸‹è½½çš„èµ„æº~~

- ä¿®ç‚¼ä¸åˆ°å®¶ï¼Œæ‰¾ä¸åˆ°ï¼ŒğŸ˜„ğŸ˜„ğŸ˜„ï¼Œåæ¥å°±æ”¾å¼ƒäº†
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/ec809c60-6e25-4fb9-b671-5d754e1427b9-2331693.jpg)

#### ~~æ–¹æ³•2ï¼šä»chromium å®˜ç½‘ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬~~

- 1. æŸ¥çœ‹puppeterå’Œchromiumçš„å¯¹åº”å…³ç³»ï¼Œæ‰¾åˆ°å¯¹åº”å…³ç³» ç„¶ååœ¨chromiumçš„ä¸‹è½½é“¾æ¥åé¢è‡ªå·±æ¢ä¸€ä¸‹ï¼Œç„¶åä¸‹è½½<https://github.com/chromium/chromium/releases/tag/111.0.5556.0>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/92656856-48fb-4fa7-be85-f67055a534b5-2331693.jpg)
-ç­‰äº†ä¸¤ä¸ªå°æ—¶ï¼Œå‘ç°è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸å¯¹çš„ï¼Œ700mï¼Œå®¶é‡Œé¢é‚£ä¸ªç”µè„‘ä¹Ÿå°±æ˜¯170mã€‚è¿™ä¸ªæ€è·¯ä¹Ÿæ˜¯é”™çš„
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/67b36f83-b1a9-4843-adcb-30a2473800c5-2331693.jpg)

#### æ–¹æ³•3ï¼šchromeä¸puppeteerç‰ˆæœ¬å‘ç”Ÿå†²çªåœ¨giteeä¸Šæ‰¾äº†å¦ä¸€ä¸ªæ€è·¯

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/78c86a47-bf44-42ff-b2e1-5e34cc17567b-2331693.jpg)

- æˆ‘å½“æ—¶æ‰¾åˆ°äº†è¿™ä¸ªissueï¼Œä½†æ˜¯æ²¡æœ‰æŒ‰ç…§è¿™ä¸ªæ€è·¯æ‰¾ä¸‹å»ï¼Œå¦‚æœæˆ‘ç›´æ¥å»æœç´¢è¿™ä¸ªå…³é”®è¯ï¼Œå¯èƒ½æˆ‘å°±ä¸ç”¨æµªè´¹åŠå¤©æ—¶é—´äº†ã€‚å“ˆå“ˆè°·æ­Œæœç´¢è¿™ä¸ªå…³é”®è¯
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/206847da-8d77-417a-b6b2-04eff91bdc0b-2331693.jpg)
- çœ‹è¿™é‡Œï¼Œgithubåœ°å€ï¼š <https://github.com/wadezhan/billfeller.github.io/issues/232ï¼Œæ˜¯ä¸ªæ·±åœ³çš„å¤§ä½¬ï¼Œæ„Ÿè°¢~>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/99a5a762-5378-46b4-b3fa-3b9866ddbccb-2331693.jpg)

#### æ–¹æ³•4ï¼špuppeteer install Chromium r1095492  erroræ¢äº†ä¸ªæ€è·¯ï¼Œç„¶åè¿›äº†è¿™ä¸ªç½‘ç«™

![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/768cf23e-39b8-4e21-a5ae-848b28e70b8b-2331693.jpg)

- çœ‹äº†è¿™ä¸ªissueï¼š<https://github.com/puppeteer/puppeteer/issues/1597#issuecomment-351945645>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/044f6e32-0c59-47fa-bbd9-3f28ecea3bd3-2331693.jpg)
- 2017å¹´è¿™ä¸ªé—®é¢˜å°±å­˜åœ¨äº†ï¼Œåªä¸è¿‡é‚£æ—¶å€™å¤§å¤šæ•°äººç”¨äº†æ·˜å®é•œåƒå¯ä»¥è§£å†³ï¼Œä½†æ˜¯æˆ‘åœ¨2023-03-13çš„æ—¶å€™ç”¨æ·˜å®é•œåƒå°±å‘ç°æ²¡æœ‰é‚£ä¸ªèµ„æºï¼Œåº”è¯¥æ˜¯æ²¡æœ‰åŒæ­¥è¿‡æ¥
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/a3a02afb-a50d-429c-a57d-0458ce00534d-2331693.jpg)
- cnpm ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/64de745a-d078-43d9-ab7d-978f8aeebb85-2331693.jpg)
- Download failed: server returned code 404. URL: <https://npmmirror.com/mirrors//chromium-browser-snapshots/Win_x64/1095492/chrome-win.zip>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/cbcb3ae3-8a8d-42fc-9df8-c7894058737c-2331693.jpg)
- chromium-browser-snapshotsåº“
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/dd5b3ef0-30e9-4bb8-b482-c17eab919615-2331693.jpg)

#### ç»ˆæåŸå› 

> æˆ‘å°±ä¸€ç›´å¥½å¥‡è¿™ä¸ªFailed to set up Chromium r1095492! é‡Œé¢çš„r1095492æ˜¯å•¥ä¸œè¥¿ï¼Œåæ¥å¾—åˆ°ç­”æ¡ˆæ‰çŸ¥é“ï¼ŒåŸæ¥æ˜¯ä¸€ä¸ªæ‰€è°“çš„ç‰ˆæœ¬å·ã€‚ã€‚ã€‚ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯chromium çš„ç‰ˆæœ¬ï¼Œæ€è·¯é”™äº†ï¼Œä»–æ˜¯ä¸€ä¸ªchromium-browser-snapshots é‡Œé¢çš„ç‰ˆæœ¬å·
<https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win_x64/>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/2d0fdb73-67f5-45c0-a482-3a5c62d5c2c4-2331693.jpg)

- è¿™ä¸ªæ²¡æœ‰æ¢¯å­ä¸Šä¸å»ï¼š<https://registry.npmmirror.com/binary.html?path=chromium-browser-snapshots/Win_x64/>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/698d491c-b73f-4def-9904-c2f91452a2dc-2331693.jpg)
<https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win_x64/1095492/>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/a1003433-aa58-45be-9f43-ff9775570eaa-2331693.jpg)
-ä¸‹è½½åçš„èµ„æºå¤§æ¦‚é•¿è¿™æ ·ï¼Œä¸¤å¤©äº†ï¼Œä½ çŸ¥é“æˆ‘ä¸¤å¤©æ€ä¹ˆè¿‡æ¥çš„å—ï¼ï¼ï¼
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/8371978f-ea54-41c6-b8c9-8b3bea54654b-2331693.jpg)
- ç›´æ¥æŠŠè§£å‹åçš„æ–‡ä»¶ä¸¢ä¸Šå»æ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»æŒ‰ç…§puppeter çš„è¿™ç§æ ¼å¼æ‰è¡Œï¼Œè§£å‹å‡ºæ¥æ˜¯chrome-winæ–‡ä»¶å¤¹ï¼Œ
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/e19c8cca-8fdd-49d0-8f45-7012fca32c90-2331693.jpg)
- ç„¶åæŠŠæ‹·è´çš„æ–‡ä»¶ï¼Œä¸¢åˆ°å½“å‰ç”¨æˆ·ä¸‹çš„ .cache/puppeteer ä¸‹æ–°å»ºä¸€ä¸ªwin64-1095492æ–‡ä»¶å¤¹ä¸‹å°±å¥½äº†
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/cad27f46-326f-4101-bdf2-96c9f272d2d3-2331693.jpg)
- æå®šï¼Œä¸‹ç­ï¼ï¼ï¼
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/4eb96ed5-8453-4c8a-b74c-a7d72ccf8221-2331693.jpg)
- æœ€åï¼Œæ€»ç»“ä¸€ä¸‹ï¼Œå…¶å®è‡ªå·±å¥½å¤šæ¬¡éƒ½å·²ç»è§¦ç¢°åˆ°äº†ç­”æ¡ˆï¼Œåªæ˜¯æ²¡æœ‰æ³¨æ„åˆ°ï¼ŒğŸ˜„ğŸ˜„ï¼Œå†æ—¶ä¸¤å¤©ï¼Œç»ˆäºæå®šï¼Œæ„Ÿè°¢é˜…è¯»ï¼Œè°¢è°¢~

### æ–¹æ³•5ï¼šä½¿ç”¨æœ¬æœºçš„chrom

- ç¬¬ä¸€æ­¥ï¼šexport PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
- ç¬¬äºŒæ­¥ï¼šnpm i puppeteer
- ç¬¬ä¸‰æ­¥ï¼š<https://stackoverflow.com/questions/59786319/configure-puppeteer-executablepath-chrome-in-your-local-windows>
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/cebc179c-085a-4423-82d7-184f6d83992b-2331693.jpg)

```js
await puppeteer.launch({    headless: false,    args: ['--disable-infobars', '--no-sandbox', '--disable-setuid-sandbox'],   // window å¦‚æœå¤åˆ¶æ˜¯ä¸‹é¢çš„åœ°å€æ˜¯ä¸è¡Œçš„ï¼Œ    executablePath: 'C:\Program Files\Google\Chrome\Application\chrome.exe',   // window è¦æŠŠ åœ°å€é‡Œé¢çš„ \ éƒ½å˜æˆ \ \ ,ä¸ç„¶ç‹—å¸¦ï¼Œå¿˜è®°æ˜¯å•¥åŸå› äº†ï¼Œåæ­£å°±æ˜¯æ²¡æœ‰è®¡ç®—æœºä½“ç³»çŸ¥è¯†ä¸æ‡‚ï¼Œå“ˆå“ˆï¼Œå¤§æ¦‚è¿™ç§æ„æ€   executablePath: 'C:\Program Files\Google\Chrome\Application\chrome.exe',  });
```

## æƒ³çœ‹æºç çš„å¯ä»¥ç…ç…

[æºç ](https://github.com/qinyuanqiblog/house)

## å…è´£å£°æ˜

- æœ¬é¡¹ç›®åªæ˜¯å­¦ä¹ ä½¿ç”¨ï¼Œæ— æ„å¯¹æ­¤ç½‘ç«™è¿›è¡Œçˆ¬è™«ç­‰æ“ä½œ

## å‚è€ƒèµ„æ–™

- puppeteerå¦‚ä½•è§¦å‘è¡¨å•æäº¤
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/25512407-4cdf-424b-af7c-a136ea2380e4-2331693.jpg)
- puppeteerå¦‚ä½•æ‰§è¡Œé¡µé¢çš„jsæ–¹æ³•
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/33d72133-e044-4dca-acb0-6f84c7673b8d-2331693.jpg)
- [Puppeteer åŸºæœ¬æ¦‚å¿µä»‹ç»](https://ifun.dev/post/puppeteer-introduction/)
- [puppeteerç¯å¢ƒéƒ¨ç½²é—®é¢˜å°è®°](https://github.com/wadezhan/billfeller.github.io)
- vscode å¦‚ä½•è°ƒè¯•node
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/bcc8f89b-b463-41fb-8388-aaf01ba62d4d-2331693.jpg)

```js
// launch.json é…ç½® 
{
  "name": "nodejs-debugger",
  "program": "${workspaceFolder}/index.js",
  "request": "launch",
  "skipFiles": [
      "<node_internals>/**"
  ],
  "type": "node"
},
```

- æ•°æ®åº“ç›¸å…³dateç©ºå­—ç¬¦ä¸²å¤„ç†é—®é¢˜åŸå› ï¼Œçˆ¬äº†ä¸€åƒå¤šæ¡æ•°æ®ï¼Œç„¶åæŒ‚äº†ï¼Œè¯´æ’å…¥æ•°æ®åº“é”™è¯¯ã€‚ã€‚ã€‚
![å›¾ç‰‡](https://api2.mubu.com/v3/document_image/b84fb4fc-2323-416f-a97b-46c7f40bf190-2331693.jpg)
é—®äº†ä¸‹å¤§å“¥ä»¬ï¼Œå¥½åƒä¸è¡Œï¼Œåªèƒ½ä¼ å…¥date å’Œnullï¼Œæˆ–è€…æ˜¯è¯´æŠŠdate å˜æˆå­—ç¬¦ä¸²ï¼Œå“ˆå“ˆï¼Œæ„Ÿè§‰ä¸å¥½æŠŠï¼Œæœ‰ç‚¹ä¸šä½™
